<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bjorn Cyberviking - Achievements</title>
    <link rel="icon" href="web/images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="web/css/styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" sizes="192x192" href="web/images/icon-192x192.png">
    <script src="web/scripts/achievements.js" defer></script>
    <style>
        .achievement-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .achievement-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .achievement-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .stat-card {
            background: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin: 10px;
            min-width: 150px;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }

        .achievement-categories {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }

        .category-button {
            background: #34495e;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .category-button:hover {
            background: #3498db;
        }

        .category-button.active {
            background: #e74c3c;
        }

        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .achievement-card {
            background: #2c3e50;
            border-radius: 8px;
            padding: 20px;
            color: white;
            transition: transform 0.3s;
        }

        .achievement-card:hover {
            transform: translateY(-5px);
        }

        .achievement-card.completed {
            background: #27ae60;
            border: 2px solid #2ecc71;
        }

        .achievement-card.locked {
            background: #7f8c8d;
            opacity: 0.7;
        }

        .achievement-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .achievement-name {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .achievement-description {
            margin-bottom: 15px;
            color: #bdc3c7;
        }

        .achievement-reward {
            color: #f39c12;
            font-weight: bold;
        }

        .achievement-progress {
            margin-top: 15px;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #34495e;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #3498db;
            transition: width 0.3s;
        }

        .progress-text {
            margin-top: 5px;
            font-size: 0.9em;
            color: #bdc3c7;
        }

        .completion-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #e74c3c;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
        }
    </style>
</head>

<body>
    <div class="toolbar" id="mainToolbar">
        <button type="button" onclick="window.location.href='/index.html'" title="Playground">
            <img src="/web/images/console_icon.png" alt="Bjorn" style="height: 50px;">
        </button>
        <button type="button" onclick="window.location.href='/config.html'" title="Config">
            <img src="/web/images/config_icon.png" alt="Icon_config" style="height: 50px;">
        </button>
        <button type="button" onclick="window.location.href='/network.html'" title="Network">
            <img src="/web/images/network_icon.png" alt="Icon_network" style="height: 50px;">
        </button>
        <button type="button" onclick="window.location.href='/netkb.html'" title="NetKB">
            <img src="/web/images/netkb_icon.png" alt="Icon_netkb" style="height: 50px;">
        </button>
        <button type="button" onclick="window.location.href='/credentials.html'" title="Credentials">
            <img src="/web/images/cred_icon.png" alt="Icon_cred" style="height: 50px;">
        </button>
        <button type="button" onclick="window.location.href='/loot.html'" title="Loot">
            <img src="/web/images/loot_icon.png" alt="Icon_loot" style="height: 50px;">
        </button>
        <button type="button" onclick="window.location.href='/achievements.html'" title="Achievements" class="active">
            <img src="/web/images/achievements_icon.png" alt="Icon_achievements" style="height: 50px;">
        </button>
    </div>

    <div class="achievement-container">
        <div class="achievement-header">
            <h1>üèÜ Bjorn Achievements</h1>
            <p>Track your progress and unlock rewards as you master the art of cybersecurity</p>
        </div>

        <div class="achievement-stats">
            <div class="stat-card">
                <div class="stat-number" id="unlocked-count">0</div>
                <div>Unlocked</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="total-count">0</div>
                <div>Total</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="completion-percentage">0%</div>
                <div>Completion</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="total-rewards">0</div>
                <div>Coins Earned</div>
            </div>
        </div>

        <div class="achievement-categories" id="category-buttons">
            <button class="category-button active" data-category="all">All Categories</button>
            <button class="category-button" data-category="combat">Combat</button>
            <button class="category-button" data-category="wireless">Wireless</button>
            <button class="category-button" data-category="exploitation">Exploitation</button>
            <button class="category-button" data-category="reconnaissance">Reconnaissance</button>
            <button class="category-button" data-category="control">Control</button>
            <button class="category-button" data-category="stealth">Stealth</button>
            <button class="category-button" data-category="speed">Speed</button>
            <button class="category-button" data-category="exfiltration">Exfiltration</button>
        </div>

        <div class="achievements-grid" id="achievements-grid">
            <!-- Achievements will be loaded here -->
        </div>
    </div>

    <script>
        // Initialize achievements page
        document.addEventListener('DOMContentLoaded', function() {
            loadAchievements();
            setupCategoryFilters();
        });

        function loadAchievements() {
            fetch('/achievements_data')
                .then(response => response.json())
                .then(data => {
                    updateStats(data);
                    displayAchievements(data.achievements);
                })
                .catch(error => {
                    console.error('Error loading achievements:', error);
                    displayError('Failed to load achievements');
                });
        }

        function updateStats(data) {
            document.getElementById('unlocked-count').textContent = data.unlocked_count;
            document.getElementById('total-count').textContent = data.total_count;
            document.getElementById('completion-percentage').textContent = data.completion_percentage + '%';
            document.getElementById('total-rewards').textContent = data.total_rewards;
        }

        function displayAchievements(achievements) {
            const grid = document.getElementById('achievements-grid');
            grid.innerHTML = '';

            achievements.forEach(achievement => {
                const card = createAchievementCard(achievement);
                grid.appendChild(card);
            });
        }

        function createAchievementCard(achievement) {
            const card = document.createElement('div');
            card.className = `achievement-card ${achievement.completed ? 'completed' : 'locked'}`;
            card.setAttribute('data-category', achievement.category);

            const icon = getAchievementIcon(achievement.id);
            const progressPercentage = achievement.progress_percentage;

            card.innerHTML = `
                ${achievement.completed ? '<div class="completion-badge">üèÜ</div>' : ''}
                <div class="achievement-icon">${icon}</div>
                <div class="achievement-name">${achievement.name}</div>
                <div class="achievement-description">${achievement.description}</div>
                <div class="achievement-reward">Reward: ${achievement.reward} coins</div>
                <div class="achievement-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progressPercentage}%"></div>
                    </div>
                    <div class="progress-text">${achievement.current}/${achievement.required} (${Math.round(progressPercentage)}%)</div>
                </div>
            `;

            return card;
        }

        function getAchievementIcon(achievementId) {
            const icons = {
                'FIRST_BLOOD': '‚öîÔ∏è',
                'WIRELESS_WARRIOR': 'üì°',
                'ZOMBIE_MASTER': 'üßü',
                'VULNERABILITY_HUNTER': 'üîç',
                'NETWORK_DOMINATOR': 'üåê',
                'STEALTH_OPERATOR': 'üëª',
                'SPEED_DEMON': '‚ö°',
                'WIFI_WIZARD': 'üîÆ',
                'CREDENTIAL_COLLECTOR': 'üîë',
                'DATA_THIEF': 'üíæ',
                'PORT_SCANNER': 'üîå',
                'TARGET_FINDER': 'üéØ',
                'ATTACK_MASTER': '‚öîÔ∏è',
                'WIRELESS_NOVICE': 'üì°',
                'VULNERABILITY_NOVICE': 'üîç',
                'ZOMBIE_NOVICE': 'üßü',
                'CREDENTIAL_NOVICE': 'üîë',
                'DATA_NOVICE': 'üíæ',
                'PORT_NOVICE': 'üîå',
                'TARGET_NOVICE': 'üéØ',
                'ATTACK_NOVICE': '‚öîÔ∏è'
            };
            return icons[achievementId] || 'üèÜ';
        }

        function setupCategoryFilters() {
            const buttons = document.querySelectorAll('.category-button');
            buttons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons
                    buttons.forEach(btn => btn.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');

                    const category = this.getAttribute('data-category');
                    filterAchievements(category);
                });
            });
        }

        function filterAchievements(category) {
            const cards = document.querySelectorAll('.achievement-card');
            cards.forEach(card => {
                if (category === 'all' || card.getAttribute('data-category') === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function displayError(message) {
            const grid = document.getElementById('achievements-grid');
            grid.innerHTML = `<div style="text-align: center; color: #e74c3c; padding: 20px;">${message}</div>`;
        }

        // Auto-refresh achievements every 30 seconds
        setInterval(loadAchievements, 30000);
    </script>
</body>
</html>